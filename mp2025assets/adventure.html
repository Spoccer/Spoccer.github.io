<!DOCTYPE html>
<html>
    <head>
        <title>Dungeon Crawler</title>
    </head>
    <body>
        <canvas id="gameCanvas" width="500" height="500"></canvas>
        <script>
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            
            
            let size = 1400; 
            if(window.innerWidth-50 < 500)
                size = window.innerWidth-50;
            if(window.innerHeight-50 < size)
                size = window.innerHeight-50;
            size = Math.floor(size/25)*25;
            ctx.canvas.width  = size;
            ctx.canvas.height = size;

            const gridSize = Math.floor(size/25);
            let level = 5;
            let hasit = false;
            
            
            const player = {
                x: gridSize,
                y: gridSize,
                color: 'red'
            };

            const colors = ['yellow','purple','skyblue','deeppink',
                            'blue','black','hotpink','steelblue',
                            'gray','green','orange','black',
                            'yellow','navy','blue','purple'];

            let gate = [false, false, false, true, 
                        false, true , false, false,
                        false, false, false, false,
                        true , false, true , false];
                    
            let key =  [true , false, false, false, 
                        true , false, true , false,
                        false, false, false, true,
                        false, false, false, false];
            
            let riddle =[true, false, false, false, 
                        true , false, true , false,
                        false, false, false, true,
                        false, false, false, false]; 

            const walls = [
                [ //grid 0 (0,0) Yellow Key
                    {x: 0, y: 0, width: gridSize, height: canvas.height}, //LEFT
                    {x: 0, y: 0, width: canvas.width, height: gridSize}, //TOP
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: 10*gridSize}, //RIGHT
                    {x: canvas.width - gridSize, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //RIGHT                    
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM

                    {x: 2 * gridSize, y: 2 * gridSize, width: gridSize, height: 10*gridSize},//left side
                    {x: 2 * gridSize, y: 13 * gridSize, width: gridSize, height: 10*gridSize},
                    {x: 2 * gridSize, y: 2 * gridSize, width: 21*gridSize, height: gridSize}, //top
                    {x: 2 * gridSize, y: canvas.height - 3*gridSize, width: 21*gridSize, height: gridSize},
                    {x: canvas.height - 3*gridSize, y: 2 * gridSize, width: gridSize, height: 21*gridSize},
                    
                    {x: 2 * gridSize, y: 11 * gridSize, width: 9*gridSize, height: gridSize},
                    {x: 2 * gridSize, y: 13 * gridSize, width: 9*gridSize, height: gridSize}                    
                ],

                [ //grid 1 (0,1) EGG DROP
                    {x: 0, y: 0, width: gridSize, height: 10*gridSize}, //LEFT
                    {x: 0, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //LEFT
                    {x: 0, y: 0, width: canvas.width, height: gridSize}, //TOP
//                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: 10*gridSize}, //RIGHT
//                    {x: canvas.width - gridSize, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //RIGHT                    
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM

                    {x: 3*gridSize, y: 3*gridSize, width: 22*gridSize, height: gridSize},
                    {x: 1*gridSize, y: 6*gridSize, width: 24*gridSize, height: gridSize},
                    {x: 7*gridSize, y: 6*gridSize, width: 1*gridSize, height: 5*gridSize},
                    {x: 10*gridSize, y: 9*gridSize, width: 1*gridSize, height: 12*gridSize},
                    {x: 13*gridSize, y: 9*gridSize, width: 1*gridSize, height: 9*gridSize},
                    {x: 13*gridSize, y: 9*gridSize, width: 12*gridSize, height: gridSize},
                    {x: 19*gridSize, y: 9*gridSize, width: 1*gridSize, height: 6*gridSize},
                    {x: 16*gridSize, y: 12*gridSize, width: 1*gridSize, height: 6*gridSize},
                    {x: 22*gridSize, y: 12*gridSize, width: 3*gridSize, height: gridSize},
                    {x: 19*gridSize, y: 15*gridSize, width: 6*gridSize, height: gridSize},
                    {x: 16*gridSize, y: 18*gridSize, width: 9*gridSize, height: gridSize},
                    {x: 10*gridSize, y: 21*gridSize, width: 15*gridSize, height: gridSize},

                    {x: 2 * gridSize, y: 17 * gridSize, width: gridSize, height: gridSize},
                    {x: 3 * gridSize, y: 18 * gridSize, width: gridSize, height: gridSize},
                    {x: 6 * gridSize, y: 17 * gridSize, width: gridSize, height: gridSize},
                    {x: 5 * gridSize, y: 18 * gridSize, width: gridSize, height: gridSize},
                    {x: 2 * gridSize, y: 21 * gridSize, width: gridSize, height: gridSize},
                    {x: 3 * gridSize, y: 20 * gridSize, width: gridSize, height: gridSize},
                    {x: 6 * gridSize, y: 21 * gridSize, width: gridSize, height: gridSize},
                    {x: 5 * gridSize, y: 20 * gridSize, width: gridSize, height: gridSize}
                ],

                [ //grid 2 (0,2) Big Hall 4
//                    {x: 0, y: 0, width: gridSize, height: 10*gridSize}, //LEFT
//                    {x: 0, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //LEFT
                    {x: 0, y: 0, width: canvas.width, height: gridSize}, //TOP
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: 10*gridSize}, //RIGHT
                    {x: canvas.width - gridSize, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //RIGHT                    
//                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM
                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom

                    {x: 0*gridSize, y: 3*gridSize, width: 21*gridSize, height: 1*gridSize},
                    {x: 0*gridSize, y: 6*gridSize, width: 18*gridSize, height: 1*gridSize},
                    {x: 0*gridSize, y: 9*gridSize, width: 21*gridSize, height: 1*gridSize},
                    {x: 0*gridSize, y: 12*gridSize, width: 21*gridSize, height: 1*gridSize},
                    {x: 0*gridSize, y: 15*gridSize, width: 21*gridSize, height: 1*gridSize},
                    {x: 0*gridSize, y: 18*gridSize, width: 21*gridSize, height: 1*gridSize},
                    {x: 0*gridSize, y: 21*gridSize, width: 21*gridSize, height: 1*gridSize},
                    {x: 21*gridSize, y: 3*gridSize, width: 1*gridSize, height: 7*gridSize},
                    {x: 21*gridSize, y: 21*gridSize, width: 1*gridSize, height: 3*gridSize},
                    {x: 7 * gridSize, y: 5 * gridSize, width: 2 * gridSize, height: gridSize}
                ],

                [ //grid 3 (0,3) RED Castle room
                        //Exterior
                    {x: 0, y: 0, width: gridSize, height: 10*gridSize}, //Left
                    {x: 0, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //Left
                    {x: 0, y: 0, width: 6*gridSize, height: gridSize}, //Top
                    {x: 7*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 9*gridSize, y: 0, width: 7*gridSize, height: gridSize},
                    {x: 15*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 17*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 19*gridSize, y: 0, width: 6*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //Right
                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom


                        //Castle
                    {x: 5*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 15*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 6*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 14*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 10*gridSize, y: 5*gridSize, width: 5*gridSize, height: 6*gridSize},
               ],
                [ //grid 4 (1,0) BLUE Key
                    {x: 0, y: 0, width: gridSize, height: canvas.height},
                    {x: 0, y: 0, width: canvas.width, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height},
//                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize},
                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom

                    {x: 3*gridSize, y: 21*gridSize, width: 21*gridSize, height: gridSize},
                    {x: 3*gridSize, y: 3*gridSize, width: gridSize, height: 19*gridSize},
                    {x: 3*gridSize, y: 3*gridSize, width: 19*gridSize, height: gridSize},
                    {x: 21*gridSize, y: 3*gridSize, width: gridSize, height: 16*gridSize},
                    {x: 6*gridSize, y: 18*gridSize, width: 15*gridSize, height: gridSize},
                    {x: 6*gridSize, y: 6*gridSize, width: gridSize, height: 13*gridSize},
                    {x: 6*gridSize, y: 6*gridSize, width: 12*gridSize, height: 1*gridSize},
                    {x: 18*gridSize, y: 6*gridSize, width: gridSize, height: 10*gridSize},
                    {x: 9*gridSize, y: 6*gridSize, width: 9*gridSize, height: 1*gridSize},
                    {x: 9*gridSize, y: 9*gridSize, width: 1*gridSize, height: 7*gridSize},
                    {x: 9*gridSize, y: 15*gridSize, width: 9*gridSize, height: 1*gridSize},
                    {x: 9*gridSize, y: 9*gridSize, width: 6*gridSize, height: 1*gridSize},
                    {x: 15*gridSize, y: 9*gridSize, width: 1*gridSize, height: 4*gridSize},
                    {x: 11*gridSize, y: 13*gridSize, width: 5*gridSize, height: 1*gridSize}
                ],

                [ //grid 5 (1,1) BLACK Castle room
                        //Exterior
                    {x: 0, y: 0, width: gridSize, height: canvas.height}, //Left
                    {x: 0, y: 0, width: 6*gridSize, height: gridSize}, //Top
                    {x: 7*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 9*gridSize, y: 0, width: 7*gridSize, height: gridSize},
                    {x: 15*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 17*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 19*gridSize, y: 0, width: 6*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //Right
                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom


                        //Castle
                    {x: 5*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 15*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 6*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 14*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 10*gridSize, y: 5*gridSize, width: 5*gridSize, height: 6*gridSize},
//                    {x: 13*gridSize, y: 4*gridSize, width: 2*gridSize, height: 6*gridSize}
                ],

                [ //grid 6 (1,2) RED Key
                    {x: 0, y: 0, width: gridSize, height: canvas.height}, //Left
                    {x: 0, y: 0, width: 10*gridSize, height: gridSize}, //top
                    {x: 15*gridSize, y: 0, width: 10*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //right
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //bottom

                    {x: 11*gridSize, y: 11*gridSize, width: gridSize, height: gridSize},
                    {x: 12*gridSize, y: 10*gridSize, width: gridSize, height: gridSize},
                    {x: 13*gridSize, y: 9*gridSize, width: gridSize, height: gridSize},
                    {x: 14*gridSize, y: 8*gridSize, width: gridSize, height: gridSize},
                    {x: 15*gridSize, y: 7*gridSize, width: gridSize, height: gridSize},
                    {x: 16*gridSize, y: 6*gridSize, width: gridSize, height: gridSize},
                    {x: 17*gridSize, y: 5*gridSize, width: gridSize, height: gridSize},
                    {x: 18*gridSize, y: 4*gridSize, width: gridSize, height: gridSize},
                    {x: 19*gridSize, y: 3*gridSize, width: gridSize, height: gridSize},
                    {x: 20*gridSize, y: 2*gridSize, width: gridSize, height: gridSize},
                    {x: 21*gridSize, y: 1*gridSize, width: gridSize, height: gridSize},
                    {x: 11*gridSize, y: 13*gridSize, width: gridSize, height: gridSize},
                    {x: 12*gridSize, y: 14*gridSize, width: gridSize, height: gridSize},
                    {x: 13*gridSize, y: 15*gridSize, width: gridSize, height: gridSize},
                    {x: 14*gridSize, y: 16*gridSize, width: gridSize, height: gridSize},
                    {x: 15*gridSize, y: 17*gridSize, width: gridSize, height: gridSize},
                    {x: 16*gridSize, y: 18*gridSize, width: gridSize, height: gridSize},
                    {x: 17*gridSize, y: 19*gridSize, width: gridSize, height: gridSize},
                    {x: 18*gridSize, y: 20*gridSize, width: gridSize, height: gridSize},
                    {x: 19*gridSize, y: 21*gridSize, width: gridSize, height: gridSize},
                    {x: 20*gridSize, y: 22*gridSize, width: gridSize, height: gridSize},
                    {x: 21*gridSize, y: 23*gridSize, width: gridSize, height: gridSize},
                    {x: 22*gridSize, y: 24*gridSize, width: gridSize, height: gridSize},
                    {x: 7 * gridSize, y: 5 * gridSize, width: 2 * gridSize, height: gridSize}
                ],

                [ //grid 7 (1,3) Big Hall 5
                    {x: 0, y: 0, width: gridSize, height: canvas.height}, //Left
                    {x: 0, y: 0, width: 10*gridSize, height: gridSize}, //top
                    {x: 15*gridSize, y: 0, width: 10*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //right
                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom

                    {x: 3 * gridSize, y: 2 * gridSize, width: gridSize, height: 3 * gridSize},
                    {x: 7 * gridSize, y: 5 * gridSize, width: 2 * gridSize, height: gridSize}
                ],

                [ //grid 8 (2,0) Big Hall 1 (hole in top , wide open right
                    
                    {x: 0, y: 0, width: gridSize, height: canvas.height}, //LEFT
                    {x: 0, y: 0, width: 10*gridSize, height: gridSize}, //TOP
                    {x: 15*gridSize, y: 0, width: 10*gridSize, height: gridSize},
//                {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //RIGHT
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM
//                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
//                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                
                ],
                [ //grid 9 (2,1) Big Hall 2 (hole in top and bottom wide open left right
                    
//                {x: 0, y: 0, width: gridSize, height: canvas.height}, //LEFT
                    {x: 0, y: 0, width: 10*gridSize, height: gridSize},
                    {x: 15*gridSize, y: 0, width: 10*gridSize, height: gridSize},
//                {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //RIGHT
                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                
                ],
                [ //grid 10 (2,2) Big Hall 3 (wide open left right
                    
//                {x: 0, y: 0, width: gridSize, height: canvas.height}, //LEFT
                    {x: 0, y: 0, width: canvas.width, height: gridSize}, //TOP
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: 10*gridSize}, //RIGHT
                    {x: canvas.width - gridSize, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //RIGHT                    
//                {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //RIGHT
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM
//                    {x: 0, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
//                    {x: 15*gridSize, y: canvas.height - gridSize, width: 10*gridSize, height: gridSize}, //Bottom
                
                ],
                [ //grid 11 (2,3) BLACK Key
                    {x: 0, y: 0, width: gridSize, height: 10*gridSize}, //Left
                    {x: 0, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //Left
                    {x: 0, y: 0, width: 10*gridSize, height: gridSize}, //TOP
                    {x: 15*gridSize, y: 0, width: 10*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //RIGHT
//                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize},

                    //key room
                    {x: 9*gridSize, y: 9*gridSize, width: gridSize, height: 3*gridSize},
                    {x: 9*gridSize, y: 9*gridSize, width: 6*gridSize, height: 1*gridSize},
                    {x: 9*gridSize, y: 13*gridSize, width: gridSize, height: 3*gridSize},
                    {x: 9*gridSize, y: 15*gridSize, width: 7*gridSize, height: 1*gridSize},
                    {x: 15*gridSize, y: 9*gridSize, width: 1*gridSize, height: 6*gridSize},
                    
                    //runs at bottom
                    {x: 3*gridSize, y: 18*gridSize, width: gridSize, height: 7*gridSize},
                    {x: 6*gridSize, y: 21*gridSize, width: gridSize, height: 4*gridSize},
                    {x: 9*gridSize, y: 18*gridSize, width: gridSize, height: 7*gridSize},
                    {x: 12*gridSize, y: 18*gridSize, width: gridSize, height: 7*gridSize},
                    {x: 15*gridSize, y: 18*gridSize, width: gridSize, height: 7*gridSize},
                    {x: 18*gridSize, y: 21*gridSize, width: gridSize, height: 4*gridSize},
                    {x: 21*gridSize, y: 18*gridSize, width: gridSize, height: 7*gridSize},
                    {x: 3*gridSize, y: 18*gridSize, width: 7*gridSize, height: 1*gridSize},
                    {x: 15*gridSize, y: 18*gridSize, width: 7*gridSize, height: 1*gridSize},
                    
                    
                    {x: 7 * gridSize, y: 5 * gridSize, width: gridSize, height: gridSize}
                ],

                [ //grid 12 (3,0) YELLOW Castle room
                        //Exterior
                    {x: 0, y: 0, width: gridSize, height: canvas.height}, //Left
                    {x: 0, y: 0, width: 6*gridSize, height: gridSize}, //Top
                    {x: 7*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 9*gridSize, y: 0, width: 7*gridSize, height: gridSize},
                    {x: 15*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 17*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 19*gridSize, y: 0, width: 6*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: 10*gridSize}, //RIGHT
                    {x: canvas.width - gridSize, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //RIGHT                    
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM


                        //Castle
                    {x: 5*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 15*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 6*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 14*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 10*gridSize, y: 5*gridSize, width: 5*gridSize, height: 6*gridSize},
               ],
                [ //Grid 13 (3,1) Polkadot room 
                    
                    {x: 0, y: 0, width: gridSize, height: 10*gridSize}, //LEFT
                    {x: 0, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //LEFT
                    {x: 0, y: 0, width: 10*gridSize, height: gridSize}, //TOP
                    {x: 15*gridSize, y: 0, width: 10*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: 10*gridSize}, //RIGHT
                    {x: canvas.width - gridSize, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //RIGHT
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM

                    {x: 2 * gridSize, y: 17 * gridSize, width: gridSize, height: gridSize},
                    {x: 13 * gridSize, y: 11 * gridSize, width: gridSize, height: gridSize},
                    {x: 8 * gridSize, y: 14 * gridSize, width: gridSize, height: gridSize},
                    {x: 22 * gridSize, y: 7 * gridSize, width: gridSize, height: gridSize},
                    {x: 20 * gridSize, y: 17 * gridSize, width: gridSize, height: gridSize},
                    {x: 16 * gridSize, y: 21 * gridSize, width: gridSize, height: gridSize},
                    {x: 5 * gridSize, y: 3 * gridSize, width: gridSize, height: gridSize},
                    {x: 7 * gridSize, y: 2 * gridSize, width: gridSize, height: gridSize},
                    {x: 19 * gridSize, y: 8 * gridSize, width: gridSize, height: gridSize},
                    {x: 14 * gridSize, y: 23 * gridSize, width: gridSize, height: gridSize},
                    {x: 9 * gridSize, y: 12 * gridSize, width: gridSize, height: gridSize},
                    {x: 21 * gridSize, y: 15 * gridSize, width: gridSize, height: gridSize},
            
                    {x: 3 * gridSize, y: 6 * gridSize, width: gridSize, height: gridSize},
                    {x: 19 * gridSize, y: 3 * gridSize, width: gridSize, height: gridSize},
                    {x: 18 * gridSize, y: 13 * gridSize, width: gridSize, height: gridSize},
                    {x: 4 * gridSize, y: 8 * gridSize, width: gridSize, height: gridSize},
                    {x: 22 * gridSize, y: 14 * gridSize, width: gridSize, height: gridSize},
                    {x: 11 * gridSize, y: 19 * gridSize, width: gridSize, height: gridSize},
                    {x: 10 * gridSize, y: 9 * gridSize, width: gridSize, height: gridSize},
                    {x: 2 * gridSize, y: 20 * gridSize, width: gridSize, height: gridSize},
                    {x: 15 * gridSize, y: 13 * gridSize, width: gridSize, height: gridSize},
            
                ],
                [ //Grid 14 (3,2) BLUE Castle room
                        //Exterior
                    {x: 0, y: 0, width: gridSize, height: 10*gridSize}, //Left
                    {x: 0, y: 15*gridSize, width: gridSize, height: 10*gridSize}, //Left
                    {x: 0, y: 0, width: 6*gridSize, height: gridSize}, //Top
                    {x: 7*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 9*gridSize, y: 0, width: 7*gridSize, height: gridSize},
                    {x: 15*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 17*gridSize, y: 0, width: gridSize, height: gridSize},
                    {x: 19*gridSize, y: 0, width: 6*gridSize, height: gridSize},
                    {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height}, //Right
                    {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize}, //BOTTOM


                        //Castle
                    {x: 5*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 15*gridSize, y: 1*gridSize, width: 5*gridSize, height: 8*gridSize},
                    {x: 6*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 14*gridSize, y: 7*gridSize, width: 5*gridSize, height: 7*gridSize},
                    {x: 10*gridSize, y: 5*gridSize, width: 5*gridSize, height: 6*gridSize},
               ],
               [ //grid 15 (3,3)
                {x: 0, y: 0, width: gridSize, height: canvas.height},
//                {x: 0, y: 0, width: canvas.width, height: gridSize},
                {x: canvas.width - gridSize, y: 0, width: gridSize, height: canvas.height},
                {x: 0, y: canvas.height - gridSize, width: canvas.width, height: gridSize},
                //verticals
                {x: 3*gridSize, y: 0*gridSize, width: 1*gridSize, height: 12*gridSize},
                {x: 6*gridSize, y: 0*gridSize, width: 1*gridSize, height: 15*gridSize},
                {x: 9*gridSize, y: 0*gridSize, width: 1*gridSize, height: 12*gridSize},
                {x: 12*gridSize, y: 0*gridSize, width: 1*gridSize, height: 15*gridSize},
                {x: 15*gridSize, y: 0*gridSize, width: 1*gridSize, height: 12*gridSize},
                {x: 18*gridSize, y: 0*gridSize, width: 1*gridSize, height: 15*gridSize},
                {x: 21*gridSize, y: 0*gridSize, width: 1*gridSize, height: 12*gridSize},
                //horizontals
                {x: 0*gridSize, y: 14*gridSize, width: 7*gridSize, height: 1*gridSize},
                {x: 9*gridSize, y: 11*gridSize, width: 7*gridSize, height: 1*gridSize},
                {x: 18*gridSize, y: 14*gridSize, width: 7*gridSize, height: 1*gridSize},
                {x: 6*gridSize, y: 17*gridSize, width: 13*gridSize, height: 1*gridSize},
                
                //Diag
                {x: 10*gridSize, y: 19*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 11*gridSize, y: 20*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 14*gridSize, y: 19*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 13*gridSize, y: 20*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 10*gridSize, y: 23*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 11*gridSize, y: 22*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 14*gridSize, y: 23*gridSize, width: 1*gridSize, height: 1*gridSize},
                {x: 13*gridSize, y: 22*gridSize, width: 1*gridSize, height: 1*gridSize}
                
                ]
            ];

            const img1 = new Image();
            const img2 = new Image();
            const img3 = new Image();
            const img4 = new Image();
            const img5 = new Image();
            
//            img1.src = "Double_Dare_2018_logo.png"; // Replace with your image path
            img1.src = "puzzle1.png"; 
            img2.src = "puzzle2.png";
            img3.src = "puzzle3.png";
            img4.src = "Carbon-Dioxide-Molecule.gif";
            img5.src = "puzzle5.png";
            
//            img.onload = function() {
//              ctx.drawImage(img, 300, 300, 100, 50);
//            };
            
//            img.addEventListener("load", (e) => {
//                ctx.drawImage(img, 10, 10);
//              });

//            function delta()
//            {
//                if()
//                i.src = "puzzle"+i.src;
//            }

            function drawPlayer() {
                ctx.fillStyle = player.color;
                ctx.fillRect(player.x, player.y, gridSize, gridSize);
            }


            function drawWalls() {
//                ctx.fillStyle = 'black';
//                ctx.fillStyle = 'rgb(0, 0, 255)';
                ctx.fillStyle = colors[level];
                walls[level].forEach(wall => {
                    ctx.fillRect(wall.x, wall.y, wall.width, wall.height);
                });
            }
            
            function drawGates() {
                ctx.fillStyle = 'black';
                for(let z=gridSize/6; z<gridSize*3; z+=gridSize/3)
                {
                    ctx.fillRect(gridSize*11+z, gridSize*11, gridSize/7, gridSize*3);
                    ctx.fillRect(gridSize*11, gridSize*11+z, gridSize*3, gridSize/7);
                }
            }
            
            function drawExtras() {
//                if(player.y >=200)
//                    ctx.drawImage(img, 300, 300, 100, 50);
//                ctx.font = '20px Arial';
//                ctx.fillStyle = 'blue';
//                ctx.fillText('Hello! '+level+' '+player.x+' '+player.y+' '+gridSize, player.x+30, player.y+30); // Filled text
//                ctx.strokeText('Hello, Canvas!', 50, 100); // Outlined text

                if(key[level])
                {
                    //draw key at center
                    ctx.fillStyle = colors[level];
                    ctx.fillRect(gridSize*13.1, gridSize*12.1, gridSize*0.8, gridSize*0.8);                    
                    ctx.fillRect(gridSize*13.5, gridSize*12.4, gridSize*1.4, gridSize*0.2);                    
                    ctx.fillRect(gridSize*14.4, gridSize*12.4, gridSize*0.1, gridSize*0.5);                    
                    ctx.fillRect(gridSize*14.7, gridSize*12.4, gridSize*0.1, gridSize*0.5);                    
                }
                if(riddle[level])
                {
                    ctx.fillStyle = 'black';
                    ctx.fillRect(gridSize*10, gridSize*12, gridSize, gridSize);
                    //draw riddle at location
                    ctx.fillStyle = colors[level];
                    ctx.fillRect(gridSize*10, gridSize*12, gridSize*0.4, gridSize*0.4);                    
                    ctx.fillRect(gridSize*10.3, gridSize*12.3, gridSize*0.4, gridSize*0.4);                    
                    ctx.fillRect(gridSize*10.6, gridSize*12.6, gridSize*0.4, gridSize*0.4);                    
                    ctx.fillRect(gridSize*10.6, gridSize*12, gridSize*0.4, gridSize*0.4);                    
                    ctx.fillRect(gridSize*10, gridSize*12.6, gridSize*0.4, gridSize*0.4);
                }
                if(level==15 && !hasit)
                    ctx.fillRect(gridSize*12.5, gridSize*21.5,2,2);
            }


            function checkCollision(x, y) {
                for (let wall of walls[level]) {
                    if (x < wall.x + wall.width &&
                            x + gridSize > wall.x &&
                            y < wall.y + wall.height &&
                            y + gridSize > wall.y) {
                        return true;
                    }
                }
                return false;
            }
            
            //Used for key and riddle 
            function checkCollision2(x, y, xx, yy)
            {
                return (x < xx + gridSize &&
                        x + gridSize > xx &&
                        y < yy + gridSize &&
                        y + gridSize > yy) ;               
            }


            function gameLoop() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                drawWalls();
                drawExtras();
                if(gate[level])
                    drawGates();
//                ctx.drawImage(img, 300, 300, 100, 50);
                updateLocation();
                drawPlayer();
                requestAnimationFrame(gameLoop);
            }
            
            let rightPressed = false;
            let leftPressed = false;
            let upPressed = false;
            let downPressed = false;
            
            function stopMove()
            {
                rightPressed = false;
                leftPressed = false;
                upPressed = false;
                downPressed = false;
            }
            
            function updateLocation() { 
                let newX = player.x;
                let newY = player.y;

                if(rightPressed)
                    newX += gridSize/4;
                if(leftPressed)
                    newX -= gridSize/4;
                if(upPressed)
                    newY -= gridSize/4;
                if(downPressed)
                    newY += gridSize/4;
                
                if (!checkCollision(newX, newY)) {
                    player.x = newX;
                    player.y = newY;
                }
                //Moving to new grid...
                if(player.x >= canvas.width-2)
                {
                    level++;
                    player.x = 0;
                }
                if(player.x < 0)
                {
                    level--;
                    player.x = canvas.width-gridSize;
                }
                if(player.y >= canvas.height-2)
                {
                    level+=4;
                    player.y = 0;
                }                    
                if(player.y < 0)
                {
                    level-=4;
                    player.y = canvas.height-gridSize;
                }
                if(riddle[level] && checkCollision2(player.x,player.y,10*gridSize,12*gridSize))
                    askRiddle();
                if(key[level] && checkCollision2(player.x,player.y,13*gridSize,12*gridSize))
                    key[level] = false;
                if(gate[level])
                {
                    if(level==5 && !key[11] && checkCollision2(player.x,player.y,12*gridSize,11*gridSize))
                        showPuzzle(1);
                    if(level==3 && !key[6] && checkCollision2(player.x,player.y,12*gridSize,11*gridSize))
                        showPuzzle(2);
                    if(level==12 && !key[0] && checkCollision2(player.x,player.y,12*gridSize,11*gridSize))
                        showPuzzle(3);
                    if(level==14 && !key[4] && checkCollision2(player.x,player.y,12*gridSize,11*gridSize))
                        showPuzzle(4);                    
                }
                if(level==1 && player.x==4*gridSize && player.y==19*gridSize && hasit)
                    showPuzzle(5);
                if(level==15 && player.x==12*gridSize && player.y==21*gridSize)
                    hasit=true;
            }
            
            function showPuzzle(num)
            {
                if(num == 1)
                    ctx.drawImage(img1, gridSize*2, gridSize*2, gridSize*21, gridSize*21);
                if(num == 2)
                    ctx.drawImage(img2, gridSize*2, gridSize*2, gridSize*21, gridSize*21);
                if(num == 3)
                    ctx.drawImage(img3, gridSize*2, gridSize*2, gridSize*21, gridSize*21);
                if(num == 4)
                    ctx.drawImage(img4, gridSize*2, gridSize*2, gridSize*21, gridSize*21);   
                if(num == 5)
                    ctx.drawImage(img5, gridSize*2, gridSize*2, gridSize*21, gridSize*21);   
            }
            
            function askRiddle()
            {
                stopMove();
                let riddleWords = "riddle here.";
                let answer = "something";
                if(level == 11) {
                    riddleWords = "First think of the person who lives in disguise, Who deals in secrets and tells naught but lies. Next, tell me what’s always the last thing to mend, The middle of middle and end of the end? And finally give me the sound often heard During the search for a hard-to-find word. Now string them together, and answer me this, Which creature would you be unwilling to kiss? \n (answer in ALLCAPS)"; 
                    answer = "SPIDER";
                }
                else if(level == 0) {
                    riddleWords = "I once heard of a bookkeeper who, while working on the accounts of the Frobozz Magic Balloon Company, noted that the word 'balloon' has two double letters in a row! Stretching his limited imagination to the limit, he wondered if there were any words with THREE double letters in a row. He couldn't think of one -- but I'll bet that YOU can! \n (answer in ALLCAPS)"; 
                    answer = "BOOKKEEPER";                
                }
                else if(level == 4) {
                    riddleWords = "Thirty white horses on a red hill, First the champ, Then they stamp, Then they stand stIll.   \n (answer in ALLCAPS)"; 
                    answer = "TEETH";
                }
                else if(level == 6) {
                    riddleWords = "As I was going to St. Ives, \n I met a man with seven wives, \n Each wife had seven sacks, \n Each sack had seven cats, \n Each cat had seven kits: \n Kits, cats, sacks, and wives, \n How many were there going to St. Ives? \n (answer in ALLCAPS)"; 
                    answer = "ONE";
                }
                let response = prompt(riddleWords, "");

                if (response == null || response == "") {
                    player.x=gridSize;
                    player.y=gridSize;
                } else if (response == answer) {
                    riddle[level] = false; //correct
                }
                else //incorrect, send back to start
                {
                    player.x = 3*gridSize;
                    player.y = 3*gridSize; 
                    level = 5;
                }

            }
            
            function show_image(src, width, height,alt) {
            // Create a new image element
            let img = document.createElement("img");

            // Set the source, width, 
            // height, and alt attributes
            img.src = src;
            img.width = width;
            img.height = height;
            img.alt = alt;

            // Append the image element
            // to the body of the document
            document.body.appendChild(img);
           }

            document.addEventListener('touchstart', (event) => {
                // Handle touch start
                const touch = event.touches[0]; // e.touches is an array containing all touches
                const x = touch.clientX;
                const y = touch.clientY;
                if(y > gridSize*15)
                    downPressed = true;
                if(y < gridSize*10)
                    upPressed = true;
                if(x > gridSize*15)
                    rightPressed = true;
                if(x < gridSize*10)
                    leftPressed = true;
                
              });
            document.addEventListener('touchend', (event) => {
                    downPressed = false;
                    upPressed = false;
                    rightPressed = false;
                    leftPressed = false;             
              });
            document.addEventListener('keyup', (event) => {

                switch (event.key) {
                    case 'ArrowUp':
                        upPressed = false;
                        break;
                    case 'ArrowDown':
                        downPressed = false;
                        break;
                    case 'ArrowLeft':
                        leftPressed = false;
                        break;
                    case 'ArrowRight':
                        rightPressed = false;
                        break;
                }
            });


            document.addEventListener('keydown', (event) => {
                let newX = player.x;
                let newY = player.y;


                switch (event.key) {
                    case 'ArrowUp':
                        upPressed = true;
                        break;
                    case 'ArrowDown':
                        downPressed = true;
                        break;
                    case 'ArrowLeft':
                        leftPressed = true;
                        break;
                    case 'ArrowRight':
                        rightPressed = true;
                        break;
                }

//                if(player.y >=200)
////                    ctx.drawImage(img, 300, 300, 100, 50);
//                    show_image("Double_Dare_2018_logo.png", 300, 200,"altText");

//                if (player.x >= 200)
//                    window.open("http://www.cnn.com", '_blank');
            });


            gameLoop();
        </script>
    </body>
</html>